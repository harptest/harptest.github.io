<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1385px" preserveAspectRatio="none" style="width:1464px;height:1385px;" version="1.1" viewBox="0 0 1464 1385" width="1464px" zoomAndPan="magnify"><defs><filter height="300%" id="f5c0w0earqo5j" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f5c0w0earqo5j)" height="1182.1094" style="stroke:#A80036;stroke-width:1.0;" width="10" x="290" y="106.6953"/><rect fill="#FFFFFF" filter="url(#f5c0w0earqo5j)" height="133.7969" style="stroke:#A80036;stroke-width:1.0;" width="10" x="295" y="891.5469"/><rect fill="#FFFFFF" filter="url(#f5c0w0earqo5j)" height="83.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="444.5" y="487.5547"/><rect fill="#FFFFFF" filter="url(#f5c0w0earqo5j)" height="1053.3125" style="stroke:#A80036;stroke-width:1.0;" width="10" x="702" y="171.0938"/><rect fill="#FFFFFF" filter="url(#f5c0w0earqo5j)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="864" y="224.3594"/><rect fill="#FFFFFF" filter="url(#f5c0w0earqo5j)" height="83.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="950" y="282.625"/><rect fill="#FFFFFF" filter="url(#f5c0w0earqo5j)" height="180.7969" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1060" y="419.2891"/><rect fill="#FFFFFF" filter="url(#f5c0w0earqo5j)" height="98.5313" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1191" y="629.2188"/><rect fill="#FFFFFF" filter="url(#f5c0w0earqo5j)" height="98.5313" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1191" y="1089.7422"/><rect fill="#FFFFFF" filter="url(#f5c0w0earqo5j)" height="98.5313" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1328" y="763.8828"/><rect fill="#FFFFFF" filter="url(#f5c0w0earqo5j)" height="1010.1797" style="stroke:#000000;stroke-width:2.0;" width="1264" x="186" y="186.0938"/><rect fill="#ADFF2F" filter="url(#f5c0w0earqo5j)" height="354.7266" style="stroke:#000000;stroke-width:2.0;" width="1006" x="296" y="381.0234"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="75" x2="75" y1="40.2969" y2="1342.0703"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="294.5" x2="294.5" y1="40.2969" y2="1342.0703"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="449.5" x2="449.5" y1="40.2969" y2="1342.0703"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="707" x2="707" y1="40.2969" y2="1342.0703"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="868.5" x2="868.5" y1="40.2969" y2="1342.0703"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="954.5" x2="954.5" y1="40.2969" y2="1342.0703"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1064.5" x2="1064.5" y1="40.2969" y2="1342.0703"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1195.5" x2="1195.5" y1="40.2969" y2="1342.0703"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1332.5" x2="1332.5" y1="40.2969" y2="1342.0703"/><rect fill="#FEFECE" filter="url(#f5c0w0earqo5j)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="136" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="122" x="12" y="24.9951">Viewpoint Core API</text><rect fill="#FEFECE" filter="url(#f5c0w0earqo5j)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="136" x="5" y="1341.0703"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="122" x="12" y="1361.0654">Viewpoint Core API</text><rect fill="#FEFECE" filter="url(#f5c0w0earqo5j)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="115" x="235.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="101" x="242.5" y="24.9951">AI Interface API</text><rect fill="#FEFECE" filter="url(#f5c0w0earqo5j)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="115" x="235.5" y="1341.0703"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="101" x="242.5" y="1361.0654">AI Interface API</text><rect fill="#FEFECE" filter="url(#f5c0w0earqo5j)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="166" x="364.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="152" x="371.5" y="24.9951">Text-Generation-WebUI</text><rect fill="#FEFECE" filter="url(#f5c0w0earqo5j)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="166" x="364.5" y="1341.0703"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="152" x="371.5" y="1361.0654">Text-Generation-WebUI</text><rect fill="#FEFECE" filter="url(#f5c0w0earqo5j)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="184" x="613" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="170" x="620" y="24.9951">knowledgeGraphGenerator</text><rect fill="#FEFECE" filter="url(#f5c0w0earqo5j)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="184" x="613" y="1341.0703"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="170" x="620" y="1361.0654">knowledgeGraphGenerator</text><rect fill="#FEFECE" filter="url(#f5c0w0earqo5j)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="75" x="829.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="61" x="836.5" y="24.9951">cleanText</text><rect fill="#FEFECE" filter="url(#f5c0w0earqo5j)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="75" x="829.5" y="1341.0703"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="61" x="836.5" y="1361.0654">cleanText</text><rect fill="#FEFECE" filter="url(#f5c0w0earqo5j)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="69" x="918.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="925.5" y="24.9951">tokenize</text><rect fill="#FEFECE" filter="url(#f5c0w0earqo5j)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="69" x="918.5" y="1341.0703"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="925.5" y="1361.0654">tokenize</text><rect fill="#FEFECE" filter="url(#f5c0w0earqo5j)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="123" x="1001.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="1008.5" y="24.9951">generateERGraph</text><rect fill="#FEFECE" filter="url(#f5c0w0earqo5j)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="123" x="1001.5" y="1341.0703"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="1008.5" y="1361.0654">generateERGraph</text><rect fill="#FEFECE" filter="url(#f5c0w0earqo5j)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="111" x="1138.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="97" x="1145.5" y="24.9951">reconcileGraph</text><rect fill="#FEFECE" filter="url(#f5c0w0earqo5j)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="111" x="1138.5" y="1341.0703"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="97" x="1145.5" y="1361.0654">reconcileGraph</text><rect fill="#FEFECE" filter="url(#f5c0w0earqo5j)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="135" x="1263.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="121" x="1270.5" y="24.9951">contextualizeEmail</text><rect fill="#FEFECE" filter="url(#f5c0w0earqo5j)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="135" x="1263.5" y="1341.0703"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="121" x="1270.5" y="1361.0654">contextualizeEmail</text><rect fill="#FFFFFF" filter="url(#f5c0w0earqo5j)" height="1182.1094" style="stroke:#A80036;stroke-width:1.0;" width="10" x="290" y="106.6953"/><rect fill="#FFFFFF" filter="url(#f5c0w0earqo5j)" height="133.7969" style="stroke:#A80036;stroke-width:1.0;" width="10" x="295" y="891.5469"/><rect fill="#FFFFFF" filter="url(#f5c0w0earqo5j)" height="83.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="444.5" y="487.5547"/><rect fill="#FFFFFF" filter="url(#f5c0w0earqo5j)" height="1053.3125" style="stroke:#A80036;stroke-width:1.0;" width="10" x="702" y="171.0938"/><rect fill="#FFFFFF" filter="url(#f5c0w0earqo5j)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="864" y="224.3594"/><rect fill="#FFFFFF" filter="url(#f5c0w0earqo5j)" height="83.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="950" y="282.625"/><rect fill="#FFFFFF" filter="url(#f5c0w0earqo5j)" height="180.7969" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1060" y="419.2891"/><rect fill="#FFFFFF" filter="url(#f5c0w0earqo5j)" height="98.5313" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1191" y="629.2188"/><rect fill="#FFFFFF" filter="url(#f5c0w0earqo5j)" height="98.5313" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1191" y="1089.7422"/><rect fill="#FFFFFF" filter="url(#f5c0w0earqo5j)" height="98.5313" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1328" y="763.8828"/><polygon fill="#A80036" points="278,102.6953,288,106.6953,278,110.6953,282,106.6953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="75" x2="284" y1="106.6953" y2="106.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="82" y="101.6294">Context processing request</text><path d="M305,55.2969 L305,140.2969 L432,140.2969 L432,65.2969 L422,55.2969 L305,55.2969 " fill="#FBFB77" filter="url(#f5c0w0earqo5j)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M422,55.2969 L422,65.2969 L432,65.2969 L422,55.2969 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="311" y="72.3638">POST /context</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="311" y="87.4966">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="317" y="102.6294">"job_id": &lt;GUID&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="317" y="117.7622">"email": &lt;string&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="311" y="132.895">}</text><polygon fill="#A80036" points="690,167.0938,700,171.0938,690,175.0938,694,171.0938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="300" x2="696" y1="171.0938" y2="171.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="383" x="307" y="166.0278">contextUpdater = initialize with email content, headers, and job_id</text><path d="M186,186.0938 L526,186.0938 L526,193.0938 L516,203.0938 L186,203.0938 L186,186.0938 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="1010.1797" style="stroke:#000000;stroke-width:2.0;" width="1264" x="186" y="186.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="295" x="201" y="199.1606">contextUpdater &lt;knowledgeGraphGenerator&gt;</text><polygon fill="#A80036" points="852,220.3594,862,224.3594,852,228.3594,856,224.3594" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="712" x2="858" y1="224.3594" y2="224.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="719" y="219.2935">raw email content</text><polygon fill="#A80036" points="723,249.4922,713,253.4922,723,257.4922,719,253.4922" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="717" x2="868" y1="253.4922" y2="253.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="729" y="248.4263">cleaned email content</text><polygon fill="#A80036" points="938,278.625,948,282.625,938,286.625,942,282.625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="712" x2="944" y1="282.625" y2="282.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="719" y="277.5591">cleaned email content</text><path d="M864,295.625 L864,335.625 L1041,335.625 L1041,305.625 L1031,295.625 L864,295.625 " fill="#FBFB77" filter="url(#f5c0w0earqo5j)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1031,295.625 L1031,305.625 L1041,305.625 L1031,295.625 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="870" y="312.6919">Tokenize the email content</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="870" y="327.8247">into individual sentences</text><polygon fill="#A80036" points="723,362.0234,713,366.0234,723,370.0234,719,366.0234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="717" x2="954" y1="366.0234" y2="366.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="729" y="360.9575">tokenized sentences</text><path d="M296,381.0234 L369,381.0234 L369,388.0234 L359,398.0234 L296,398.0234 L296,381.0234 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="354.7266" style="stroke:#000000;stroke-width:2.0;" width="1006" x="296" y="381.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="311" y="394.0903">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="105" x="384" y="393.2339">[For each sentence]</text><polygon fill="#A80036" points="1048,415.2891,1058,419.2891,1048,423.2891,1052,419.2891" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="712" x2="1054" y1="419.2891" y2="419.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="719" y="414.2231">tokenized sentences</text><path d="M934,432.2891 L934,457.2891 L1192,457.2891 L1192,442.2891 L1182,432.2891 L934,432.2891 " fill="#FBFB77" filter="url(#f5c0w0earqo5j)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1182,432.2891 L1182,442.2891 L1192,442.2891 L1182,432.2891 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="237" x="940" y="449.356">Generate an ER Graph for each sentence</text><polygon fill="#A80036" points="465.5,483.5547,455.5,487.5547,465.5,491.5547,461.5,487.5547" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="459.5" x2="1059" y1="487.5547" y2="487.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="471.5" y="482.4888">sentence text</text><path d="M306,500.5547 L306,540.5547 L589,540.5547 L589,510.5547 L579,500.5547 L306,500.5547 " fill="#FBFB77" filter="url(#f5c0w0earqo5j)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M579,500.5547 L579,510.5547 L589,510.5547 L579,500.5547 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="262" x="312" y="517.6216">Generate an ER Graph for the given sentence</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="312" y="532.7544">using the provided grammar file</text><polygon fill="#A80036" points="1048,566.9531,1058,570.9531,1048,574.9531,1052,570.9531" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="449.5" x2="1054" y1="570.9531" y2="570.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="55" x="456.5" y="565.8872">ER Graph</text><polygon fill="#A80036" points="723,596.0859,713,600.0859,723,604.0859,719,600.0859" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="717" x2="1064" y1="600.0859" y2="600.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="729" y="595.02">list of sentence ER Graphs</text><polygon fill="#A80036" points="1179,625.2188,1189,629.2188,1179,633.2188,1183,629.2188" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="712" x2="1185" y1="629.2188" y2="629.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="234" x="719" y="624.1528">sentence ER Graph, currnet email Graph</text><path d="M1099,642.2188 L1099,697.2188 L1288,697.2188 L1288,652.2188 L1278,642.2188 L1099,642.2188 " fill="#FBFB77" filter="url(#f5c0w0earqo5j)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1278,642.2188 L1278,652.2188 L1288,652.2188 L1278,642.2188 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="1105" y="659.2856">reconcile the given sentence</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="1105" y="674.4185">ER Graph with the current</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="71" x="1105" y="689.5513">email Graph</text><polygon fill="#A80036" points="723,723.75,713,727.75,723,731.75,719,727.75" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="717" x2="1195" y1="727.75" y2="727.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="729" y="722.6841">updated email Graph</text><polygon fill="#A80036" points="1316,759.8828,1326,763.8828,1316,767.8828,1320,763.8828" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="712" x2="1322" y1="763.8828" y2="763.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="185" x="719" y="758.8169">updated email Graph, metadata</text><path d="M1226,776.8828 L1226,831.8828 L1436,831.8828 L1436,786.8828 L1426,776.8828 L1226,776.8828 " fill="#FBFB77" filter="url(#f5c0w0earqo5j)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1426,776.8828 L1426,786.8828 L1436,786.8828 L1426,776.8828 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="1232" y="793.9497">update the email graph</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="189" x="1232" y="809.0825">with information from metadata,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="1232" y="824.2153">such as sender and time</text><polygon fill="#A80036" points="723,858.4141,713,862.4141,723,866.4141,719,862.4141" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="717" x2="1332" y1="862.4141" y2="862.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="255" x="729" y="857.3481">updated email graph with actor information</text><polygon fill="#A80036" points="316,887.5469,306,891.5469,316,895.5469,312,891.5469" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="310" x2="701" y1="891.5469" y2="891.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="322" y="886.481">GET /context/:job_id</text><path d="M196,904.5469 L196,959.5469 L390,959.5469 L390,914.5469 L380,904.5469 L196,904.5469 " fill="#FBFB77" filter="url(#f5c0w0earqo5j)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M380,904.5469 L380,914.5469 L390,914.5469 L380,904.5469 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="173" x="202" y="921.6138">Get the current context graph</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="202" y="936.7466">for the given job_id to</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="202" y="951.8794">obfuscate the user identity</text><polygon fill="#A80036" points="690,1021.3438,700,1025.3438,690,1029.3438,694,1025.3438" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="300" x2="696" y1="1025.3438" y2="1025.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="82" x="307" y="1020.2778">context graph</text><path d="M717,973.9453 L717,1058.9453 L918,1058.9453 L918,983.9453 L908,973.9453 L717,973.9453 " fill="#FBFB77" filter="url(#f5c0w0earqo5j)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M908,973.9453 L908,983.9453 L918,983.9453 L908,973.9453 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="723" y="991.0122">Response: GET /context:job_id</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="723" y="1006.145">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="729" y="1021.2778">"job_id": &lt;GUID&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="729" y="1036.4106">"context": &lt;graph&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="723" y="1051.5435">}</text><polygon fill="#A80036" points="1179,1085.7422,1189,1089.7422,1179,1093.7422,1183,1089.7422" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="712" x2="1185" y1="1089.7422" y2="1089.7422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="253" x="719" y="1084.6763">user context graph, email knowledge graph</text><path d="M1074,1102.7422 L1074,1157.7422 L1313,1157.7422 L1313,1112.7422 L1303,1102.7422 L1074,1102.7422 " fill="#FBFB77" filter="url(#f5c0w0earqo5j)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1303,1102.7422 L1303,1112.7422 L1313,1112.7422 L1303,1102.7422 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="218" x="1080" y="1119.8091">reconcile the total user context graph</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="199" x="1080" y="1134.9419">with the individual, contextualized</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="1080" y="1150.0747">email knowledge graph</text><polygon fill="#A80036" points="723,1184.2734,713,1188.2734,723,1192.2734,719,1188.2734" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="717" x2="1195" y1="1188.2734" y2="1188.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="729" y="1183.2075">updated context graph</text><polygon fill="#A80036" points="311,1220.4063,301,1224.4063,311,1228.4063,307,1224.4063" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="305" x2="706" y1="1224.4063" y2="1224.4063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="127" x="317" y="1219.3403">refined context graph</text><polygon fill="#A80036" points="86,1284.8047,76,1288.8047,86,1292.8047,82,1288.8047" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="80" x2="294" y1="1288.8047" y2="1288.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="191" x="92" y="1283.7388">Response: refined context graph</text><path d="M305,1237.4063 L305,1322.4063 L487,1322.4063 L487,1247.4063 L477,1237.4063 L305,1237.4063 " fill="#FBFB77" filter="url(#f5c0w0earqo5j)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M477,1237.4063 L477,1247.4063 L487,1247.4063 L477,1237.4063 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="311" y="1254.4731">Response: POST /context</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="311" y="1269.606">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="317" y="1284.7388">"job_id": &lt;GUID&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="317" y="1299.8716">"updated_graph": &lt;graph&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="311" y="1315.0044">}</text><!--MD5=[0837b192463fb94e1c1588d839a65b7c]
@startuml workflow-B-ms2

' Define actors and systems
participant "Viewpoint Core API" as cAPI
participant "AI Interface API" as API
participant "Text-Generation-WebUI" as AI

' Define the KnowledgeGraphGenerator group
participant "knowledgeGraphGenerator" as KGG



' Sequence of interactions
cAPI -> API : Context processing request
note right: POST /context \n{\n  "job_id": <GUID>,\n  "email": <string>\n}
activate API
API -> KGG : contextUpdater = initialize with email content, headers, and job_id

group contextUpdater <knowledgeGraphGenerator>

participant "cleanText" as Cleaner
participant "tokenize" as Tokenizer
participant "generateERGraph" as ERGG
participant "reconcileGraph" as RG
participant "contextualizeEmail" as CE

activate KGG
KGG -> Cleaner : raw email content
activate Cleaner
Cleaner -> KGG : cleaned email content
deactivate Cleaner

KGG -> Tokenizer : cleaned email content 
activate Tokenizer
note over Tokenizer
    Tokenize the email content
    into individual sentences
end note
Tokenizer -> KGG : tokenized sentences
deactivate Tokenizer

loop #GreenYellow For each sentence
KGG -> ERGG : tokenized sentences

activate ERGG
note over ERGG
    Generate an ER Graph for each sentence
end note

ERGG -> AI : sentence text
activate AI
note over AI
    Generate an ER Graph for the given sentence
    using the provided grammar file
end note
AI -> ERGG : ER Graph
deactivate AI

ERGG -> KGG : list of sentence ER Graphs
deactivate ERGG

    KGG -> RG : sentence ER Graph, currnet email Graph
    activate RG
    note over RG
        reconcile the given sentence 
        ER Graph with the current 
        email Graph
    end note
    RG -> KGG : updated email Graph
    deactivate RG
end

KGG -> CE : updated email Graph, metadata
activate CE
note over CE
    update the email graph
    with information from metadata,
    such as sender and time
end note
CE -> KGG : updated email graph with actor information
deactivate CE


KGG -> API : GET /context/:job_id
activate API
note over API
    Get the current context graph
    for the given job_id to 
    obfuscate the user identity
end note
API -> KGG : context graph
note right: Response: GET /context:job_id \n{\n  "job_id": <GUID>,\n  "context": <graph>\n} 

deactivate API

KGG -> RG : user context graph, email knowledge graph
activate RG
note over RG
    reconcile the total user context graph
    with the individual, contextualized
    email knowledge graph
end note
RG -> KGG : updated context graph
deactivate RG

end group
KGG -> API : refined context graph

deactivate KGG
API -> cAPI : Response: refined context graph
note right: Response: POST /context \n{\n  "job_id": <GUID>,\n  "updated_graph": <graph>\n} 
deactivate API

@enduml

@startuml workflow-B-ms2

participant "Viewpoint Core API" as cAPI
participant "AI Interface API" as API
participant "Text-Generation-WebUI" as AI

participant "knowledgeGraphGenerator" as KGG



cAPI -> API : Context processing request
note right: POST /context \n{\n  "job_id": <GUID>,\n  "email": <string>\n}
activate API
API -> KGG : contextUpdater = initialize with email content, headers, and job_id

group contextUpdater <knowledgeGraphGenerator>

participant "cleanText" as Cleaner
participant "tokenize" as Tokenizer
participant "generateERGraph" as ERGG
participant "reconcileGraph" as RG
participant "contextualizeEmail" as CE

activate KGG
KGG -> Cleaner : raw email content
activate Cleaner
Cleaner -> KGG : cleaned email content
deactivate Cleaner

KGG -> Tokenizer : cleaned email content 
activate Tokenizer
note over Tokenizer
    Tokenize the email content
    into individual sentences
end note
Tokenizer -> KGG : tokenized sentences
deactivate Tokenizer

loop #GreenYellow For each sentence
KGG -> ERGG : tokenized sentences

activate ERGG
note over ERGG
    Generate an ER Graph for each sentence
end note

ERGG -> AI : sentence text
activate AI
note over AI
    Generate an ER Graph for the given sentence
    using the provided grammar file
end note
AI -> ERGG : ER Graph
deactivate AI

ERGG -> KGG : list of sentence ER Graphs
deactivate ERGG

    KGG -> RG : sentence ER Graph, currnet email Graph
    activate RG
    note over RG
        reconcile the given sentence 
        ER Graph with the current 
        email Graph
    end note
    RG -> KGG : updated email Graph
    deactivate RG
end

KGG -> CE : updated email Graph, metadata
activate CE
note over CE
    update the email graph
    with information from metadata,
    such as sender and time
end note
CE -> KGG : updated email graph with actor information
deactivate CE


KGG -> API : GET /context/:job_id
activate API
note over API
    Get the current context graph
    for the given job_id to 
    obfuscate the user identity
end note
API -> KGG : context graph
note right: Response: GET /context:job_id \n{\n  "job_id": <GUID>,\n  "context": <graph>\n} 

deactivate API

KGG -> RG : user context graph, email knowledge graph
activate RG
note over RG
    reconcile the total user context graph
    with the individual, contextualized
    email knowledge graph
end note
RG -> KGG : updated context graph
deactivate RG

end group
KGG -> API : refined context graph

deactivate KGG
API -> cAPI : Response: refined context graph
note right: Response: POST /context \n{\n  "job_id": <GUID>,\n  "updated_graph": <graph>\n} 
deactivate API

@enduml

PlantUML version 1.2020.23(Sun Dec 13 19:14:58 GMT 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>